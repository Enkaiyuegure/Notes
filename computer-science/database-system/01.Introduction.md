# 1.绪论

**数据库管理系统(DataBase-Management System, DBMS)**, 由一个相互关联的数据的集合与一组用以访问这些数据的程序组成  
其中，数据集合被称为**数据库(database)**  
DBMS的主要目的是提供一种可以方便、高效地存取数据库信息的途径

设计数据库系统的目的是管理大量信息，其涉及:

1. 信息存储结构的定义
2. 信息操作机制的提供
3. 提供信息安全性保证
4. 提供多用户访问支持

## 1.1 应用

应用系统最主要的方面不是执行某些运算的程序，而是数据自身

### 1.1.1 数据库系统

> 其为一个大型的复杂的软件系统，任务是管理大型的复杂的数据集合  
> 数据库系统管理如下数据集合:

1. 高价值
2. 规模相对庞大
3. 常常同时被多个用户和应用系统访问  
   其中可能包括具有复杂联系和更加易变结构的数据

如今的数据库系统充分利用数据结构中的公共特性以获取高效性，同时也允许弱结构化和易变格式的数据

### 1.1.2 使用方式

1. 支持**联机事务处理(online transaction processing)**
   - 即大量用户使用数据库，每个用户检索相对少量的数据，进行小的更新
   - 为绝大多数用户的主要使用方式
2. 支持**数据分析(data analytics)**
   - 即审阅数据，给出结论，并推导出规则或决策程序，以用于驱动业务决策
   - 主要形式为从数据中自动地发现规则和模式并创建**预测模型(preductive model)**, 其以个体的属性(特征)作为输入，将事件可能性作为输出

### 1.1.3 数据挖掘

**数据挖掘(data mining)**, 将人工智能研究者和统计分析员所创造的知识，发现与技术同使之能被用于超大规模数据库的高效实现技术结合起来

## 1.2 典型数据存储

> 其使用**文件处理系统(file-processing system)**, 受传统操作系统所支持

其弊端有:

1. **数据的冗余和不一致性(data redundancy and inconsistency)**
   - 同一段数据可能在多个文件中冗余，加大空间开销
   - 各文件内数据可能具有不同的结构，导致**数据不一致性(data inconsistency)**
2. **数据访问困难(difficulty in accessing data)**
   - 没有成体系的管理工具进行数据查询与修改
3. **数据孤立(data isolation)**
   - 数据以不同的格式存储在不同的文件中，难以进行统一管理
4. **完整性问题(integrity problem)**
   - 难以设置**一致性约束(consistency constraint)**
5. **原子性问题(atomicity problem)**
   - 无法实现过程的不可分割性
6. **并发访问异常(concurrent-access anomaly)**
7. **安全性问题(security problem)**

## 1.3 数据视图

> 数据库会为用户提供数据的抽象视图

### 1.3.1 数据模型

数据库结构的基础是**数据模型(data model)**: 一个描述数据、数据联系、数据语义以及一致性约束的概念工具的集合
一般模型分为四类:

- **关系模型(relational model)**
  - 使用表(也称关系)的集合以表示数据和数据间的联系
  - 每个表由多个列组成，每个列有唯一的列名
- **实体-联系模型(entity-relationship model, E-R model)**
  - 使用称作实体的基本对象的集合，以及这些对象间的联系
- **半结构化数据模型(semi-structured data model)**
  - 允许在其数据定义中某些相同类型的数据项含有不同的属性集
  - 多用JSON和可扩展标记语言(eXtensible Markup Language, XML)表示半结构化数据
- **基于对象的数据模型(object-based data model)**
  - 已经被很好地整合进关系数据库中，对象现在可以存放入关系表中
  - 可以看成是对关系模型进行了扩展，增加了封装、方法和对象标识等概念

### 1.3.2 数据抽象

为简化用户与系统的交互，**数据抽象(data abstraction)** 对用户屏蔽了数据库复杂的实现

- **物理层(physical level)**
  - 最低层次的抽象
  - 描述数据实际上是怎样存储的
  - 详细描述复杂的底层数据结构
  - 使用名为索引的数据结构以支持对记录的高效检索
- **逻辑层(logical level)**
  - 描述数据库中存储什么数据，以及这些数据间存在什么联系
  - 数据库管理员无需认识物理层的复杂实现即可管理数据库，称作**物理数据独立性(physical data independence)**
  - 通过类型定义进行描述，定义记录类型之间的相互关系
- **视图层(view level)**
  - 最高层次的抽象
  - 只描述整个数据库的某个部分

数据库系统使得应用开发人员能够使用数据模型的抽象来存储和检索数据，并且将抽象操作转换为在底层实现上的操作

### 1.3.3 实例与模式

特定时刻存储中数据库中的信息的集合，称作数据库的一个**实例(instance)**

数据库的总体设计称作数据库**模式(schema)**

- **物理模式(physical schema)**
  - 在物理层描述数据库的设计
- **逻辑模式(logical schema)**
  - 在逻辑层描述数据库的设计
  - 最重要
- **子模式(subschema)**
  - 描述数据库的不同视图

[前文](#1.3.2-数据抽象)提到的物理数据独立性在模式方面的解释:  
应用程序如果不依赖物理模式，即使物理模式改变了它们也无须重写

## 1.4 数据库语言

> **数据定义语言(Data-Definition Language, DDL)**定义数据库模式  
> **数据操纵语言(Data-Manipulation Language, DML)**表达数据库的查询和更新  
> 二者并非两种互相分离的语言，而是单一数据库语言的不同部分  
> 几乎所有的关系数据库系统都使用SQL语言

### 1.4.1 数据定义语言

通过一系列特定的DDL语句来说明数据库系统所采用的存储结构和访问方式，这种特定的DDL称作**数据存储和定义(data storage and definition)**语言

存储在数据库中的数据值必须满足某些一致性约束，这种约束可以是关于数据库的任意谓词  
为高效目的，数据库系统仅实现可以以最小代价测试的完整性约束

- **域约束(domain constraint)**
  - 每个属性都必须对应于一个所有可能的取值构成的域
  - 其是完整性约束的最基本形式
- **引用完整性(referential integrity)**
  - 确保一个关系中给定属性集上的取值也在另一关系的某一属性集的取值中出现
  - 当引用完整性约束被违反时，通常的处理是拒绝执行导致完整性被破坏的操作
- **授权(authorization)**
  - 对不同用户在数据库中的不同数据值上允许不同的访问类型，以区分用户
  - **读权限(read authorization)** 允许读取数据，但不能修改数据
  - **插入权限(insert authorization)** 允许插入新数据，但不允许修改已有数据
  - **更新权限(update authorization)** 允许修改，但不能删除数据
  - **删除权限(delete authorization)** 允许删除数据

DDL具有输出，存放在**数据字典(data dictionary)**中  
数据字典包含**元数据(metadata)**, 其是关于数据的数据  
数据字典可以视作特殊的表，且只能由数据库系统本身来访问和修改  
在读取和修改实际的数据前，数据库系统先要参考数据字典

### 1.4.2 数据操纵语言

DML具有以下访问类型:

- 对存储中数据库中的信息进行检索
- 向数据库中插入新的信息
- 从数据库中删除信息
- 修改数据库中存储的信息

基本上，DML由两种类型:

- **过程化的DML(procedural DML)** 要求用户指定需要什么数据以及如何获取这些数据
- **声明式的DML(declarative DML)** 也称为非过程化的DML，只要求用户指定需要什么数据，而不必指明如何获得这些数据

**查询(query)**是要求对信息进行检索的语句  
DML中涉及信息检索的部分称作查询语句(query language)

在[前文](#1.3.2-数据抽象)提到的抽象层次不仅可以用于定义或构造数据，而且还可以用于操纵数据
数据库的查询处理器部件将DML的查询语句翻译成数据库系统物理层的动作序列  
其中，动作序列是一系列高效访问数据的算法
